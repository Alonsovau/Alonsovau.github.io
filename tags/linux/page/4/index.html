<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Linux" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://alonsovau.github.io/tags/linux/" />

<meta property="og:updated_time" content="2018-06-16T00:00:00&#43;00:00"/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux"/>
<meta name="twitter:description" content=""/>



    <link rel="canonical" href="https://alonsovau.github.io/tags/linux/">

    <title>
      
        Linux | Xin Zhou Blog
      
    </title>

    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="https://alonsovau.github.io/css/style.css" rel="stylesheet">

    
    <link href="https://alonsovau.github.io/tags/linux/index.xml" rel="alternate" type="application/rss+xml" title="Xin Zhou Blog" />
    

    

    
  </head>
  <body>
    
      

<header class="blog-header">
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <a class="navbar-brand" href="/">
            Xin Zhou Blog
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
            <ul class="navbar-nav">
                
                
                <li class="nav-item ">
                    
                        <a class="nav-link" href="/">Home</a>
                    
                </li>
                
                <li class="nav-item ">
                    
                        <a class="nav-link" href="/about/">About</a>
                    
                </li>
                
                <li class="nav-item ">
                    
                        <a class="nav-link" href="/contact/">Contact</a>
                    
                </li>
                
            </ul>
            
        </div>
    </nav>
</header>

    

    
    <div class="container">
      <div class="row">
        <div class="col-12 col-lg-8 blog-main">

          








    
        <article class="blog-post">
    <header>
        <h2 class="blog-post-title">
    <a class="text-dark" href="/2018/06/%E6%96%87%E4%BB%B6%E5%8F%8Aterminal%E7%BB%88%E7%AB%AF%E7%BC%96%E7%A0%81/">文件及Terminal终端编码</a>
</h2>

        


<div class="blog-post-date text-secondary">
    
        <time datetime="2018-06-16">Jun 16, 2018</time>
    
    
        by <span rel="author">Xin Zhou</span>
    
</div>

        
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/linux">linux</a>
    
</div>

        
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/linux">Linux</a>
    
</div>

    </header>
    1. set fileencoding 查看文件编码 2. set fileencdding=utf-8 设置文件编码 按wq保存 3. :e ++enc=cp936 # vim打开文档后，encoding=utf-8（locale决定的），fileencoding=latin1（自动编码判断机制不准导致的），termencoding=空（默认无需转换term编码），显示文件为乱码
    
</article>

    



    
        <article class="blog-post">
    <header>
        <h2 class="blog-post-title">
    <a class="text-dark" href="/2018/05/mysql5.7-linux%E5%AE%89%E8%A3%85/">Mysql5.7 Linux安装</a>
</h2>

        


<div class="blog-post-date text-secondary">
    
        <time datetime="2018-05-24">May 24, 2018</time>
    
    
        by <span rel="author">Xin Zhou</span>
    
</div>

        
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/linux">linux</a>
    
        <a class="badge badge-primary" href="/tags/mysql">mysql</a>
    
</div>

        
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/mysql">Mysql</a>
    
</div>

    </header>
    rpm -ivh mysql-community-common-5.7.22-1.el7.x86_64.rpm mysql-community-libs-5.7.22-1.el7.x86_64.rpm rpm -ivh mysql-community-client-5.7.22-1.el7.x86_64.rpm mysql-community-server-5.7.22-1.el7.x86_64.rpm mysqld --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data/ --initialize service mysqld start grep &#39;temporary password&#39; /var/log/mysqld.log mysql -uroot -p ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;cffEx2016!&#39;; GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;cffEx2016!&#39; WITH GRANT OPTION; 拷贝my.cnf到/etc/目录下 my.cnf 权限为-rw-r--r-- 重启mysql
    
</article>

    



    
        <article class="blog-post">
    <header>
        <h2 class="blog-post-title">
    <a class="text-dark" href="/2018/04/mysql-keepalived%E9%AB%98%E5%8F%AF%E7%94%A8/">MySQL+Keepalived高可用</a>
</h2>

        


<div class="blog-post-date text-secondary">
    
        <time datetime="2018-04-11">Apr 11, 2018</time>
    
    
        by <span rel="author">Xin Zhou</span>
    
</div>

        
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/linux">linux</a>
    
        <a class="badge badge-primary" href="/tags/mysql">mysql</a>
    
        <a class="badge badge-primary" href="/tags/keepalived">keepalived</a>
    
</div>

        
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/mysql">Mysql</a>
    
</div>

    </header>
    一、结构  简介：
系统主要通过Keepalived+MySQL双主来实现MySQL-HA，我们必须保证两台MySQL数据库的数据完全一样，基本设计是两台MySQL互为主从关系，通过Keepalived配置虚拟IP，实现当其中的一台MySQL数据库宕机后，应用能够自动切换到另外一台MySQL数据库，保证系统的高可用。
 拓扑环境：
 OS: Red Hat Enterprise Linux Server release 7.1 (Maipo)
 MySQL version: 5.5.59-log MySQL Community Server (GPL)
 Keepalived version: keepalived-1.3.5-1.el7.x86_64
 MySQL-Vip: 172.28.10.100
 MySQL-Master1: 172.28.10.82
 MySQL-Master2: 172.28.10.83
  结构图：
  二、 MySQL环境部署  修改MySQL配置文件
以下为master1数据库的my.cnf配置文件内容，目录为/etc/my.cnf，配置完成后重启数据库
[client] port = 3382 socket = /var/lib/mysql/mysql.sock [mysqld] port = 3382 socket = /var/lib/mysql/mysql.sock skip-external-locking key_buffer_size = 16M max_allowed_packet = 1M table_open_cache = 64 sort_buffer_size = 512K net_buffer_length = 8K read_buffer_size = 256K read_rnd_buffer_size = 512K myisam_sort_buffer_size = 8M log-bin=mysql-bin binlog_format=mixed # master2的server-id改为2 server-id = 1 # 要产生log的数据库 binlog-do-db=pms_db # 不产生log的数据库 binlog-ignore-db=mysql # 要复制的数据库 replicate-do-db=pms_db # 不复制的数据库 replicate-ignore-db=mysql log-bin=mysql-bin innodb_data_home_dir = /var/lib/mysql innodb_data_file_path = ibdata1:10M:autoextend innodb_log_group_home_dir = /var/lib/mysql innodb_buffer_pool_size = 16M innodb_additional_mem_pool_size = 2M innodb_log_file_size = 5M innodb_log_buffer_size = 8M innodb_flush_log_at_trx_commit = 1 innodb_lock_wait_timeout = 50 [mysqldump] quick max_allowed_packet = 16M [mysql] no-auto-rehash [myisamchk] key_buffer_size = 20M sort_buffer_size = 20M read_buffer = 2M write_buffer = 2M [mysqlhotcopy] interactive-timeout 将master1设置为master2的主服务器
    
    <p></p>
    <a href="/2018/04/mysql-keepalived%E9%AB%98%E5%8F%AF%E7%94%A8/">Read More →</a>
    
</article>

    



    
        <article class="blog-post">
    <header>
        <h2 class="blog-post-title">
    <a class="text-dark" href="/2018/04/%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3/">网络相关</a>
</h2>

        


<div class="blog-post-date text-secondary">
    
        <time datetime="2018-04-09">Apr 9, 2018</time>
    
    
        by <span rel="author">Xin Zhou</span>
    
</div>

        
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/linux">linux</a>
    
</div>

        
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/linux">Linux</a>
    
</div>

    </header>
    arp -a 搜索同一网段机器 iptables -L -n -v 查看已添加的iptables规则 清空日志文件： cat /dev/null&gt;/var/log/messages
    
</article>

    



    
        <article class="blog-post">
    <header>
        <h2 class="blog-post-title">
    <a class="text-dark" href="/2018/04/cluster/">cluster</a>
</h2>

        


<div class="blog-post-date text-secondary">
    
        <time datetime="2018-04-03">Apr 3, 2018</time>
    
    
        by <span rel="author">Xin Zhou</span>
    
</div>

        
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/linux">linux</a>
    
        <a class="badge badge-primary" href="/tags/mysql">mysql</a>
    
</div>

        
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/mysql">Mysql</a>
    
</div>

    </header>
    https://www.linuxidc.com/Linux/2016-07/133234.htm
 sestatus
 防火墙
   接下来就可以针对这个目录通过一些命令查看配置文件在哪了，如下
/usr/bin/mysql &ndash;verbose &ndash;help | grep -A 1 &lsquo;Default options&rsquo;
    
</article>

    



    
        <article class="blog-post">
    <header>
        <h2 class="blog-post-title">
    <a class="text-dark" href="/2018/02/crontab/">crontab</a>
</h2>

        


<div class="blog-post-date text-secondary">
    
        <time datetime="2018-02-23">Feb 23, 2018</time>
    
    
        by <span rel="author">Xin Zhou</span>
    
</div>

        
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/linux">linux</a>
    
</div>

        
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/linux">Linux</a>
    
</div>

    </header>
     1. 用法： 1.cat /etc/crontab 系统级 2./etc/cron.deny 所列用户不允许使用 3./etc/cron.allow 所列用户允许使用 4./var/spool/cron/ 下存储以用户名存储的文件 5.minute hour day month week command 6.crontab [-u user] -l 显示当前用户任务 7.crontab -l &gt; z 备份当前用户的任务到z文件 8.crontab [-u user] -e 编辑当前用户的任务 9.crontab [-u user] -r 删除 10.crontab &lt;filename&gt; 从文件恢复 11.service crond start/stop/restart/reload 2. 例子： * * * * * command 每分钟执行 3,15 * * * * command 每小时第3，15分钟执行 3,15 8-11 */2 * * command 每2天的8-11点的第3，15分钟执行 30 21 * * 0,6 command 每周日、周六21:30分执行 * */2 * * * command 每2小时执行
    
</article>

    



    
        <article class="blog-post">
    <header>
        <h2 class="blog-post-title">
    <a class="text-dark" href="/2018/02/sed/">sed</a>
</h2>

        


<div class="blog-post-date text-secondary">
    
        <time datetime="2018-02-23">Feb 23, 2018</time>
    
    
        by <span rel="author">Xin Zhou</span>
    
</div>

        
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/linux">linux</a>
    
</div>

        
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/linux">Linux</a>
    
</div>

    </header>
    语法 sed [-hnV][-e&lt;script&gt;][-f&lt;script文件&gt;][文本文件] 参数 -e&lt;script&gt;或--expression=&lt;script&gt; 以选项中指定的script来处理输入的文本文件 -f&lt;script文件&gt;或--file=&lt;script文件&gt; 以选项中指定的script文件来处理输入的文本文件 -h或--help 显示帮助 -n或--quiet或--silent 仅显示script处理后的结果 -V或--version 显示版本信息 动作  a: 新增，在匹配的下一行新增一行
 i: 插入，转匹配的上一行新增一行
 c: 取代，c后面是将替换的值
 d: 删除，删除指定行
 p: 打印，通常与sed -n一起使用
 s: 取代，进行搜索
  例子  sed -e 4a\zx zx.txt：在第四行后面加zx，输出到标准输出，macOS语法错误
 nl zx.txt |sed &lsquo;2,5d&rsquo;：列出内容并列出行号，同时删除2-5行
 nl zx.txt |sed &lsquo;2,$d&rsquo;：删除2到最后一行
 nl zx.txt |sed &lsquo;2a zx&rsquo;：第二行后增加zx，行前使用2i,macOS不可
 nl zx.txt |sed &lsquo;2a zx\按enter键xz&rsquo;：第二行后加zx，xz2行数据，macOS不可
 nl zx.txt |sed &lsquo;2,3c kol&rsquo;：2到3行替换为kol
    
    <p></p>
    <a href="/2018/02/sed/">Read More →</a>
    
</article>

    





<nav class="blog-pagination">
    <ul class="pagination justify-content-center">
        
        <li class="page-item">
            <a class="page-link" href="/tags/linux/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
        </li>
        
        <li class="page-item ">
            <a class="page-link" href="/tags/linux/page/3/" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
        </li>
        
        
            
            
            
            
                
                
            
            
                <li class="page-item ">
                    <a class="page-link" href="/tags/linux/">1</a>
                </li>
            
        
            
            
            
            
                
                
            
            
                <li class="page-item ">
                    <a class="page-link" href="/tags/linux/page/2/">2</a>
                </li>
            
        
            
            
            
            
                
                
            
            
                <li class="page-item ">
                    <a class="page-link" href="/tags/linux/page/3/">3</a>
                </li>
            
        
            
            
            
            
                
                
            
            
                <li class="page-item active">
                    <a class="page-link" href="/tags/linux/page/4/">4</a>
                </li>
            
        
            
            
            
            
                
                
            
            
                <li class="page-item ">
                    <a class="page-link" href="/tags/linux/page/5/">5</a>
                </li>
            
        
        <li class="page-item ">
            <a class="page-link" href="/tags/linux/page/5/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
        </li>
        
            <li class="page-item">
                <a class="page-link" href="/tags/linux/page/5/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
            </li>
        
    </ul>
</nav>




        </div>

        <aside class="col-12 col-lg-3 ml-auto blog-sidebar">
    
        


<section>
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">
        
        <li>
            <a href="/2019/02/%E5%BE%AA%E7%8E%AF%E6%9B%B4%E6%96%B0%E5%AD%97%E6%AE%B5%E5%B9%B6%E8%87%AA%E5%A2%9E/">循环更新字段并自增</a>
        </li>
        
        <li>
            <a href="/2019/02/%E5%AE%89%E8%A3%85lsyncd/">安装lsyncd</a>
        </li>
        
        <li>
            <a href="/2019/02/linux%E5%92%8Cwindows%E6%8D%A2%E8%A1%8C/">Linux和Windows换行</a>
        </li>
        
        <li>
            <a href="/2019/02/vmvare-multiple-network-adapters-configuration/">vmvare multiple network adapters configuration</a>
        </li>
        
        <li>
            <a href="/2018/12/watchdog/">watchdog</a>
        </li>
        
    </ol>
</section>

    
    
        <section>
    
        
        <h4>Categories</h4>
        <p>
            
            <a class="badge badge-primary" href="/categories/cpp">cpp</a>
            
            <a class="badge badge-primary" href="/categories/database">database</a>
            
            <a class="badge badge-primary" href="/categories/git">git</a>
            
            <a class="badge badge-primary" href="/categories/linux">linux</a>
            
            <a class="badge badge-primary" href="/categories/mysql">mysql</a>
            
        </p>
        
    
        
        <h4>Tags</h4>
        <p>
            
            <a class="badge badge-primary" href="/tags/cpp">cpp</a>
            
            <a class="badge badge-primary" href="/tags/database">database</a>
            
            <a class="badge badge-primary" href="/tags/git">git</a>
            
            <a class="badge badge-primary" href="/tags/ide">ide</a>
            
            <a class="badge badge-primary" href="/tags/keepalived">keepalived</a>
            
            <a class="badge badge-primary" href="/tags/linux">linux</a>
            
            <a class="badge badge-primary" href="/tags/lua">lua</a>
            
            <a class="badge badge-primary" href="/tags/mysql">mysql</a>
            
            <a class="badge badge-primary" href="/tags/shell">shell</a>
            
        </p>
        
    
</section>
    
</aside>

      </div>
    </div>
    

    
      







<footer class="blog-footer w-100">
    <nav class="navbar navbar-light bg-light">
        <p class="w-100 text-center">© 2019 Copyright Zhouxin</p>
        <p class="w-100 text-center"><a href="#">Back to top</a></p>
    </nav>
</footer>

    

    
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>
